=render 'partials/menu'

%div{id: "Question#{@question.id}"}

  %h2=Question

  title:
  =@question.title
  %br
  body:
  =@question.body
  %br
  tags:
  =link_to("#{@question.course_name}", questions_from_subject_path(@question.course_name))
  =link_to("#{@question.course_name} #{@question.course_number}", questions_from_course_path(@question.course_name, @question.course_number.to_s))

  .Vote
    =render 'likes/like', likeable: @question, path: question_likes_path(@question, Like.new)

  -if owner @question
    =link_to("Edit", edit_question_path(@question))
    =link_to("Delete", question_path(@question), method: :delete)


  .Comments
    .ExistingComments
      =render @question.comments.order('id ASC')
    .NewComment
      =render 'comments/form', resources: [@question, Comment.new], comment: Comment.new


%h2 Answers

-@question.answers.order('num_likes DESC').each do |a|
  -unless a.id.nil?
    %div{id: "Answer#{a.id}"}
      =a.body
      
      .Vote
        =render 'likes/like', likeable: a, path: answer_likes_path(a, Like.new)
      -if owner a
        =link_to("Edit", edit_answer_path(a))
        =link_to("Delete", answer_path(a), method: :delete)
      .Comments
        .ExistingComments
          =render a.comments.order('id ASC')
        .NewComment
          =render 'comments/form', resources: [a, Comment.new], comment: Comment.new
=render 'answers/form', resources: [@question, @answer]



