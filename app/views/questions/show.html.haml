=render 'partials/menu'
%h1=@question.title
=@question.body
%br
-if owner @question
  =link_to("Edit", edit_question_path(@question))
  =link_to("Delete", question_path(@question), method: :delete)
  %br

-@question.comments.each do |c|
  -unless c.id.nil?
    %span.c=c.body
    =link_to("Delete", comment_path(c), method: :delete)
    %br
.c=render 'questions/comment_form', resource: @question, comment_type: @question_comment


%h2 Answers

-@question.answers.each do |a|
  -unless a.id.nil?
    =a.body
    -if owner a
      =link_to("Edit", edit_answer_path(a))
      =link_to("Delete", answer_path(a), method: :delete)
    %br

    -a.comments.each do |c|
      -unless c.id.nil?
        %span.c=c.body
        =link_to("Delete", comment_path(c), method: :delete)
        %br

    .c=render 'questions/comment_form', resource: a, comment_type: @answer_comment
    %br


=form_for [@question, @answer] do |f|
  - if @answer.errors.any?
    %h2="#{pluralize(@answer.errors.count, "error")} "
    %ul
      -@answer.errors.full_messages.each do |msg|
        %li= msg

  =f.label :body 
  %br
  =f.text_area :body

  %br
  =f.submit 'Post'


